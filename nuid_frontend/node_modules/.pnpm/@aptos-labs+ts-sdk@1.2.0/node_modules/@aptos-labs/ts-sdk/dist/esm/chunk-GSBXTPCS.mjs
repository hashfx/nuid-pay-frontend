import{a as g,d as f,e as l,g as P,h as I,k as C}from"./chunk-CFOIMAJF.mjs";import{a as T}from"./chunk-QJPQWNVJ.mjs";import{a as d}from"./chunk-K2LNHGV5.mjs";import{a as y}from"./chunk-SBIT6S4D.mjs";import{a as s}from"./chunk-O7HXE2B5.mjs";import{b as A}from"./chunk-NANOXAUV.mjs";import{b as p}from"./chunk-47UUK4Y5.mjs";import{b as m}from"./chunk-JXVSO6IA.mjs";async function w(n){let a=await b(n);return h(n,a)}async function b(n){let{aptosConfig:a,data:t}=n,e,o;return"bytecode"in t?(e=t,o=await g(e)):"multisigAddress"in t?(e={aptosConfig:a,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments},o=await g(e)):(e={aptosConfig:a,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments},o=await g(e)),o}async function h(n,a){let{aptosConfig:t,sender:e,options:o}=n,i;if(x(n)&&(i=p.ZERO.toString()),D(n)){let{secondarySignerAddresses:r}=n;return f({aptosConfig:t,sender:e,payload:a,options:o,secondarySignerAddresses:r,feePayerAddress:i})}return f({aptosConfig:t,sender:e,payload:a,options:o,feePayerAddress:i})}function x(n){return n.withFeePayer===!0}function D(n){return"secondarySignerAddresses"in n}function j(n){let{transaction:a}=n;return C(a)}function G(n){return P({...n})}async function J(n){let{aptosConfig:a,transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:r}=n,c=l({transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:r}),{data:u}=await m({aptosConfig:a,body:c,path:"transactions/simulate",params:{estimate_gas_unit_price:n.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:n.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:n.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return u}async function _(n){let{aptosConfig:a}=n,t=I({...n}),{data:e}=await m({aptosConfig:a,body:t,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return e}async function U(n){let{aptosConfig:a,signer:t,transaction:e}=n,o=G({signer:t,transaction:e});return _({aptosConfig:a,transaction:e,senderAuthenticator:o})}async function L(n){let{aptosConfig:a,account:t,metadataBytes:e,moduleBytecode:o,options:i}=n,r=o.map(u=>s.U8(u));return await w({aptosConfig:a,sender:p.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[s.U8(e),new s(r)]},options:i})}async function Q(n){let{aptosConfig:a,fromAccount:t,toNewPrivateKey:e}=n,o=await d({aptosConfig:a,accountAddress:t.accountAddress}),i=y.fromPrivateKey({privateKey:e,legacy:!0}),c=new T({sequenceNumber:BigInt(o.sequence_number),originator:t.accountAddress,currentAuthKey:p.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),u=t.sign(c),S=i.sign(c),R=await w({aptosConfig:a,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new A(t.signingScheme.valueOf()),s.U8(t.publicKey.toUint8Array()),new A(i.signingScheme.valueOf()),s.U8(i.publicKey.toUint8Array()),s.U8(u.toUint8Array()),s.U8(S.toUint8Array())]}});return await U({aptosConfig:a,signer:t,transaction:R})}export{w as a,b,h as c,j as d,G as e,J as f,_ as g,U as h,L as i,Q as j};
//# sourceMappingURL=chunk-GSBXTPCS.mjs.map